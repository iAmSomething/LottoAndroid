# Wear OS(갤럭시 워치) 연동 기획 (Post-MVP)

## 1. 목적
- 갤럭시 워치 사용자에게 `이번 주 번호`, `당첨 결과`, `리마인더`를 손목에서 즉시 제공한다.
- 기존 Android 앱의 핵심 루틴(번호 확인 → 결과 확인)을 워치 UX에 맞게 단순화한다.

## 2. 범위
### v1 포함
- 이번 주 번호 요약 (A~E 중 핵심 2게임 우선 표시)
- 최신 당첨번호 + 내 결과 요약
- 워치 내 빠른 이동: 홈/번호/결과/설정
- 폰 연동 액션(핸드오프): `QR 스캔은 폰에서 이어서 실행`

### v1 제외
- 워치 카메라 QR 스캔
- 워치에서 전체 5게임 상세 편집
- 복권 구매/결제 기능

## 3. 기술 전략
- 플랫폼: Wear OS 4+ (minSdk 30)
- UI: Compose for Wear OS
- 데이터: 1차는 워치 로컬 샘플/캐시 구조로 구현, 2차에서 Data Layer 연동
- 연동 방식:
  - 1단계: 워치 단독 UX 완성
  - 2단계: 핸드폰 앱과 동기화(Data Layer/MessageClient)

## 4. UX 원칙
- 1초 내 핵심 정보 노출(현재 회차, D-day, 당첨 여부)
- 원형 화면 가독성 우선(짧은 라벨, 큰 숫자, 고대비)
- 터치 타겟 최소 40dp
- 스크롤 깊이 3단계 이내

## 5. 정보 구조
1. Home
  - 회차/디데이
  - 이번 주 번호 요약 진입
  - 결과 확인 진입
2. Numbers
  - A~E 게임 카드
  - 각 게임 6개 번호 볼
3. Result
  - 최신 당첨번호 6개 + 보너스
  - 내 게임별 등수/하이라이트
4. Settings
  - 진동/요약 알림 토글
  - 핸드폰에서 설정 열기 안내

## 6. 실행안 (2026)
## Phase 0 (2026-04-23 ~ 2026-04-29)
- Wear 모듈 생성, 내비게이션/테마/컴포넌트 확정

## Phase 1 (2026-04-30 ~ 2026-05-20)
- Home/Numbers/Result/Settings UI 구현
- 베이스라인 성능/가독성 점검

## Phase 2 (2026-05-21 ~ 2026-06-11)
- 핸드폰 핸드오프 액션
- 알림 연계(요약 알림 우선)

## Phase 3 (2026-06-12 ~ 2026-06-26)
- 실제 갤럭시 워치 실기기 QA
- 배터리/스크롤/터치 정확도 튜닝

## 7. 리스크 및 대응
- 리스크: 워치 화면에서 정보 과밀
  - 대응: 카드 1줄 요약 + 상세 진입 구조 유지
- 리스크: 폰 미연동 시 기능 제한
  - 대응: 워치에서 가능한 읽기 중심 기능 먼저 완성
- 리스크: 기기 파편화
  - 대응: 최소 2종(원형 소형/대형) 실기기 검증

## 8. 완료 기준 (DoD)
- 워치 주요 화면 4종(Home/Numbers/Result/Settings) 구현 완료
- 주요 사용자 플로우(홈→번호, 홈→결과, 결과→홈) 회귀 통과
- 워치 실기기에서 핵심 정보 첫 렌더 1초대 유지
- 폰 핸드오프 액션이 실패 없이 동작

## 9. 작업 보드 매핑
- 본 문서의 실행 항목은 `10-detailed-todo-board.md`의 `K-001 ~ K-020`으로 추적한다.
- 우선 착수 권장 순서:
  1. K-001 ~ K-008 (UX 확정)
  2. K-009 ~ K-012 (연동/동기화 정책)
  3. K-013 ~ K-016 (알림/QA/성능/접근성)
  4. K-017 ~ K-020 (베타/릴리즈/정책 문서)

## 10. 의사결정 로그
- `2026-02-26`: 워치 플랫폼 명칭을 Wear OS(갤럭시 워치)로 통일.

## 11. K-태스크 완료 매핑
| ID | 결정/산출 | 반영 위치 |
|---|---|---|
| K-001 | Home/Numbers/Result/Settings 4탭 IA 확정 | 5장 정보 구조 |
| K-002 | 원형 UI 기준(터치 40dp+, 가독성 우선) 확정 | 4장 UX 원칙 |
| K-003 | 워치 토큰 기준(고대비, 짧은 라벨, 큰 숫자) 정의 | 4장 UX 원칙, 5장 화면 구조 |
| K-004 | 워치 네비게이션 기본 규칙(깊이 3단계 이내) 확정 | 4장 UX 원칙, 5장 정보 구조 |
| K-005 | 홈 화면 와이어프레임 요구사항 확정 | 5장 Home |
| K-006 | 번호 화면 카드 밀도 기준 확정 | 5장 Numbers |
| K-007 | 결과 화면 상태 표현 기준 확정 | 5장 Result |
| K-008 | 설정 화면 UX 문구 방향 확정 | 5장 Settings |
| K-009 | 폰 핸드오프 정책(QR은 폰에서 실행) 확정 | 2장 범위, 3장 기술 전략 |
| K-010 | Wear Data Layer 계약(2단계 연동) 명시 | 3장 기술 전략 |
| K-011 | 동기화 충돌 정책 방향(읽기 우선, idempotent) 정의 | 3장 기술 전략, 7장 리스크 |
| K-012 | 오프라인/재연결 동기화 시나리오 방향 정의 | 3장 기술 전략, 7장 리스크 |
| K-013 | 워치 알림 정책(요약 알림 우선) 확정 | 6장 Phase 2 |
| K-014 | 디바이스 QA 매트릭스(소형/대형 2종) 확정 | 7장 리스크, 6장 Phase 3 |
| K-015 | 성능 목표(핵심 정보 1초대 노출) 확정 | 4장 UX 원칙, 8장 DoD |
| K-016 | 접근성 기준(가독성/대비/터치) 확정 | 4장 UX 원칙 |
| K-017 | 베타 테스트 범위/검증 목표 정의 | 6장 Phase 3, 8장 DoD |
| K-018 | 스토어 분리 전략(모바일/워치) 필요사항 명시 | 6장 실행안 |
| K-019 | 권한/개인정보 Wear 확장 반영 항목 식별 | 6장 실행안, 7장 리스크 |
| K-020 | 릴리즈 게이트(동기화/치명 이슈 0건) 확정 | 8장 DoD |

## 12. 구현 현황 업데이트 (2026-02-26 Cycle-06)
- `:wear` 모듈에서 v1 4화면(Home/Numbers/Result/Settings) 구현 완료
  - 경로: `wear/src/main/java/com/weeklylotto/wear/WearApp.kt`
  - 구조: `SwipeDismissableNavHost` 기반 화면 전환 + 원형 UI 기준 카드/칩/토글 구성
- 워치→폰 핸드오프 최소 경로(D02) 1차 구현 완료
  - QR 스캔/결과/설정 딥링크를 워치에서 폰으로 요청
  - 기술: `androidx.wear:wear-remote-interactions:1.1.0`
- 품질 스냅샷
  - `./gradlew :wear:assembleDebug` 성공
  - `./gradlew :app:ktlintCheck :app:detekt :app:testDebugUnitTest :app:assembleDebug :wear:assembleDebug` 성공
- 잔여 과제
  - `P-004`: 워치 실기기(소형/대형) 렌더/스크롤/터치 검증 증적 수집
